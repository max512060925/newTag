<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
{% load tag_filters %}

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Admin</title>
    <link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="css/admin.css">
</head>

<body>
    <div id="container">
        <div id="sideBar">
            <div id="textList">
                <h2>公众号标签系统</h2>
                <ul>
                    <li class="act"><i class="icon1_act mr_11"></i>标签事件</li>
                    <li><i class="icon2_un mr_11"></i>标签管理</li>
                    <li><i class="icon3_un mr_11"></i>标签分组</li>
                    <li><i class="icon4_un mr_11"></i>分组群发</li>
                    <li><i class="icon5_un mr_11"></i>用户管理</li>
                    <li><i class="icon6_un mr_11"></i>标签统计</li>
                </ul>
            </div>
            <div id="iconList">
                <h2></h2>
                <ul>
                    <li class="act"><i class="icon1_act"></i></li>
                    <li><i class="icon2_un"></i></li>
                    <li><i class="icon3_un"></i></li>
                    <li><i class="icon4_un"></i></li>
                    <li><i class="icon5_un"></i></li>
                    <li><i class="icon6_un"></i></li>
                </ul>
            </div>
        </div>
        <div id="titleBar">
            <button id="changeBtn" class="show"></button>
            <button id="mail"><span class="hasMail"></span></button>
            <div id="icon" style="background: url(img/oookini.jpeg);    background-size:contain;"></div>
            <p id="tip">OOOKINI服务</p>
            <div id="loginOut"></div>
        </div>
        <div id="mainBox">
            <div class="cover">
                <div id="cover_1">
                    <div class="inputBox">事件名<input type="" name="" placeholder="请输入事件名称" class="input_1" /></div>
                    <div class="inputBox">原链接<input type="" name="" placeholder="请输入原链接" class="input_1"/></div>
                    <div class="inputBox">标签<input type="" name="" placeholder="请输入标签名称2" class="input_2"/><input type="" name="" placeholder="请输入标签名称1" class="input_2"/></div>
                    <div class="inputBox"><input type="" name="" placeholder="请输入标签名称4" class="input_2"/><input type="" name="" placeholder="请输入标签名称3" class="input_2"/></div>
                    <button class="finishBtn">完成</button>
                    <button class="close">x</button>
                </div>
                <div id="cover_2">
                    <p>成功生成短链接</p>
                    <p id="copyUrl">URL短链接：<span></span></p>
                    <button id="copyBtn">复制链接</button>
                    <button class="close">x</button>
                </div>
                <div id="cover_3">
                    <div class="inputBox">用途<input type="" name="" placeholder="请输入用途" class="input_1" /></div>
                    <div class="inputBox">微信事件ID<input type="" name="" placeholder="请输入微信事件ID" class="input_1"/></div>
                    <div class="inputBox">标签<input type="" name="" placeholder="请输入标签名称2" class="input_2"/><input type="" name="" placeholder="请输入标签名称1" class="input_2"/></div>
                    <div class="inputBox"><input type="" name="" placeholder="请输入标签名称4" class="input_2"/><input type="" name="" placeholder="请输入标签名称3" class="input_2"/></div>
                    <button class="finishBtn">完成</button>
                    <button class="close">x</button>
                </div>
            </div>
            <ul id="tabBar">
                <li>url</li>
                <li>自定义二维码</li>
                <li>自定义菜单</li>
                <li>留言</li>
            </ul>
            <table class="TB" style="table-layout:fixed;" border="0" cellspacing="0" cellpadding="0">
            </table>
        </div>
    </div>
</body>
<!--[if lt IE 9]>
<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
<!--[if (gte IE 9)|!(IE)]><!-->
<script type="text/javascript" src="js/jquery-3.1.0.min.js"></script>
<!--<![endif]-->
<script type="text/javascript" src="js/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/jquery.combobox.limit.js"></script>
<script type="text/javascript" src="js/jquery.page.js"></script>
<script type="text/javascript" src="js/clipboard.min.js"></script>
<script>
var storage = window.localStorage;
// ajaxfunction
function ajax_factory(param) {
    $.ajax({
        url: param.url,
        type: param.type ? param.type : 'get',
        data: param.data,
        cache: false,
        dataType: "json",
        success: function(json) {
            typeof param.success == 'function' && param.success(json);
        },
        error: function() {}
    });
};

function getParameterByName(name) {
    var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
};

function addTable() {
    $(document).on('click', '#tabBar li', function() {
        if (!$(this).hasClass('act')) {
            $('#tabBar li').removeClass('act');
            $(this).addClass('act');
            var index = $(this).index(),
                html = '';
            var data = {
                tagName: '周生生H5',
                tag: ['crm', '微信'],
                url: 'cDwdc12',
                oldUrl: 'http://baidu.com',
                qr: 'https://booking.oookini.com/media/qrcode/ef/2e/bd585e5c795d48dd0afcab47acff.jpg',
            };
            switch (index) {
                case 0:
                    html += '<thead>';
                    html += '<tr>';
                    html += '<th>事件名</th>';
                    html += '<th>标签</th>';
                    html += '<th>URL(短)</th>';
                    html += '<th>原链接</th>';
                    html += '<th>操作</th>';
                    html += '</tr>';
                    html += '</thead>';
                    html += '<tbody>';
                    html += '<tr>';
                    html += '<td>' + data.tagName + '</td>';
                    html += '<td class="tbTag"><ul>';
                    for (var i = 0; i < data.tag.length; i++) {
                        html += '<li>' + data.tag[i] + '</li>'
                    };
                    html += '</ul></td>';
                    html += '<td class="sUrl">' + data.url + '</td>';
                    html += '<td><a href="' + data.oldUrl + '" target="_blank">' + data.oldUrl + '</a>/td><td>';
                    html += '<button class="copy"></button>';
                    html += '<button class="edit"></button>';
                    html += '<button class="del"></button>';
                    html += '</td></tr>';
                    html += '<tr><td></td><td></td><td></td><td></td><td><button class="add"></button></td></tr>';
                    html +='</tbody>';
                    $('.TB').empty().append(html);
                    break;
                case 1:
                    html += '<thead>';
                    html += '<tr>';
                    html += '<th>用途</th>';
                    html += '<th>标签</th>';
                    html += '<th>微信事件ID</th>';
                    html += '<th>二维码</th>';
                    html += '<th>操作</th>';
                    html += '</tr>';
                    html += '</thead>';
                    html += '<tbody>';
                    html += '<tr>';
                    html += '<td>' + data.tagName + '</td>';
                    html += '<td class="tbTag"><ul>';
                    for (var i = 0; i < data.tag.length; i++) {
                        html += '<li>' + data.tag[i] + '</li>'
                    };
                    html += '</ul></td>';
                    html += '<td>' + 'website' + '</td>';
                    html += '<td><a href="' + data.oldUrl + '" target="_blank"><img src="'+data.qr+'" width="30"/></a></td><td>';
                    html += '<button class="edit"></button>';
                    html += '<button class="del"></button>';
                    html += '</td></tr>';
                    html += '<tr><td></td><td></td><td></td><td></td><td><button class="add"></button></td></tr>';
                    html +='</tbody>';
                    $('.TB').empty().append(html);
                    break;
                case 2:
                case 3:
                    html += '<thead>';
                    html += '<tr>';
                    html += '<th>用途</th>';
                    html += '<th>标签</th>';
                    html += '<th>微信事件ID</th>';
                    html += '<th>操作</th>';
                    html += '</tr>';
                    html += '</thead>';
                    html += '<tbody>';
                    html += '<tr>';
                    html += '<td>' + data.tagName + '</td>';
                    html += '<td class="tbTag"><ul>';
                    for (var i = 0; i < data.tag.length; i++) {
                        html += '<li>' + data.tag[i] + '</li>'
                    };
                    html += '</ul></td>';
                    html += '<td>' + 'website' + '</td>';
                    html += '<td>';
                    html += '<button class="edit"></button>';
                    html += '<button class="del"></button>';
                    html += '</td></tr>';
                    html += '<tr><td></td><td></td><td></td><td><button class="add"></button></td></tr>';
                    html +='</tbody>';
                    $('.TB').empty().append(html);
                    break;
                default:
                    break;

            }
        }

    });
    $('#tabBar li').eq(0).trigger('click');
};

function toolBtn() {
    $(document).on('click', '#changeBtn', function() {
        if ($(this).hasClass('show')) {
            $(this).removeClass('show').addClass('hide');
            $('#textList').hide();
            $('#iconList').show();
            $('#sideBar').width(80);
            $('#titleBar,#mainBox').width(920);
            storage.setItem('toolBtn', '1');
        } else {
            $(this).removeClass('hide').addClass('show');
            $('#iconList').hide();
            $('#textList').show();
            $('#sideBar').width(148);
            $('#titleBar,#mainBox').width(852);
            storage.clear();
        }
    });
    if (storage.getItem('toolBtn')) {
        $('#changeBtn').trigger('click');
    };
};
$(function() {
    toolBtn();
    addTable();
    //复制链接按钮
    var clipboard = new Clipboard('#copyBtn');
    clipboard.on('success', function(e) {
        $('.cover,#cover_2').hideEve();
    });
    $(document).on('click', '.copy', function() {
        var i=$(this).index();
        console.log(1);
        $('#copyUrl span').text($('.sUrl').eq(i).text())
        $('.cover,#cover_2').show();
        $('#copyBtn').attr('data-clipboard-text',$('.sUrl').eq(i).text());
    });
    $(document).on('click', '.close', function() {
        $('.cover,#cover_1,#cover_2,#cover_3').hide();
    });
});
</script>

</html>
